(function(e){function t(t){for(var a,n,i=t[0],s=t[1],c=t[2],d=0,u=[];d<i.length;d++)n=i[d],Object.prototype.hasOwnProperty.call(l,n)&&l[n]&&u.push(l[n][0]),l[n]=0;for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a]);h&&h(t);while(u.length)u.shift()();return r.push.apply(r,c||[]),o()}function o(){for(var e,t=0;t<r.length;t++){for(var o=r[t],a=!0,n=1;n<o.length;n++){var i=o[n];0!==l[i]&&(a=!1)}a&&(r.splice(t--,1),e=s(s.s=o[0]))}return e}var a={},n={app:0},l={app:0},r=[];function i(e){return s.p+"js/"+({about:"about"}[e]||e)+"."+{about:"70543272"}[e]+".js"}function s(t){if(a[t])return a[t].exports;var o=a[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,s),o.l=!0,o.exports}s.e=function(e){var t=[],o={about:1};n[e]?t.push(n[e]):0!==n[e]&&o[e]&&t.push(n[e]=new Promise((function(t,o){for(var a="css/"+({about:"about"}[e]||e)+"."+{about:"5cca4a71"}[e]+".css",l=s.p+a,r=document.getElementsByTagName("link"),i=0;i<r.length;i++){var c=r[i],d=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(d===a||d===l))return t()}var u=document.getElementsByTagName("style");for(i=0;i<u.length;i++){c=u[i],d=c.getAttribute("data-href");if(d===a||d===l)return t()}var h=document.createElement("link");h.rel="stylesheet",h.type="text/css",h.onload=t,h.onerror=function(t){var a=t&&t.target&&t.target.src||l,r=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");r.code="CSS_CHUNK_LOAD_FAILED",r.request=a,delete n[e],h.parentNode.removeChild(h),o(r)},h.href=l;var m=document.getElementsByTagName("head")[0];m.appendChild(h)})).then((function(){n[e]=0})));var a=l[e];if(0!==a)if(a)t.push(a[2]);else{var r=new Promise((function(t,o){a=l[e]=[t,o]}));t.push(a[2]=r);var c,d=document.createElement("script");d.charset="utf-8",d.timeout=120,s.nc&&d.setAttribute("nonce",s.nc),d.src=i(e);var u=new Error;c=function(t){d.onerror=d.onload=null,clearTimeout(h);var o=l[e];if(0!==o){if(o){var a=t&&("load"===t.type?"missing":t.type),n=t&&t.target&&t.target.src;u.message="Loading chunk "+e+" failed.\n("+a+": "+n+")",u.name="ChunkLoadError",u.type=a,u.request=n,o[1](u)}l[e]=void 0}};var h=setTimeout((function(){c({type:"timeout",target:d})}),12e4);d.onerror=d.onload=c,document.head.appendChild(d)}return Promise.all(t)},s.m=e,s.c=a,s.d=function(e,t,o){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(s.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(o,a,function(t){return e[t]}.bind(null,a));return o},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],d=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var h=d;r.push([0,"chunk-vendors"]),o()})({0:function(e,t,o){e.exports=o("cd49")},"0136":function(e,t){e.exports="data:image/gif;base64,R0lGODlhEAAQAPcAAP///wAAVQAAqgAA/wAkAAAkVQAkqgAk/wBJAABJVQBJqgBJ/wBtAABtVQBtqgBt/wCSAACSVQCSqgCS/wC2AAC2VQC2qgC2/wDbAADbVQDbqgDb/wD/AAD/VQD/qgD//yQAACQAVSQAqiQA/yQkACQkVSQkqiQk/yRJACRJVSRJqiRJ/yRtACRtVSRtqiRt/ySSACSSVSSSqiSS/yS2ACS2VSS2qiS2/yTbACTbVSTbqiTb/yT/ACT/VST/qiT//0kAAEkAVUkAqkkA/0kkAEkkVUkkqkkk/0lJAElJVUlJqklJ/0ltAEltVUltqklt/0mSAEmSVUmSqkmS/0m2AEm2VUm2qkm2/0nbAEnbVUnbqknb/0n/AEn/VUn/qkn//20AAG0AVW0Aqm0A/20kAG0kVW0kqm0k/21JAG1JVW1Jqm1J/21tAG1tVW1tqm1t/22SAG2SVW2Sqm2S/222AG22VW22qm22/23bAG3bVW3bqm3b/23/AG3/VW3/qm3//5IAAJIAVZIAqpIA/5IkAJIkVZIkqpIk/5JJAJJJVZJJqpJJ/5JtAJJtVZJtqpJt/5KSAJKSVZKSqpKS/5K2AJK2VZK2qpK2/5LbAJLbVZLbqpLb/5L/AJL/VZL/qpL//7YAALYAVbYAqrYA/7YkALYkVbYkqrYk/7ZJALZJVbZJqrZJ/7ZtALZtVbZtqrZt/7aSALaSVbaSqraS/7a2ALa2Vba2qra2/7bbALbbVbbbqrbb/7b/ALb/Vbb/qrb//9sAANsAVdsAqtsA/9skANskVdskqtsk/9tJANtJVdtJqttJ/9ttANttVdttqttt/9uSANuSVduSqtuS/9u2ANu2Vdu2qtu2/9vbANvbVdvbqtvb/9v/ANv/Vdv/qtv///8AAP8AVf8Aqv8A//8kAP8kVf8kqv8k//9JAP9JVf9Jqv9J//9tAP9tVf9tqv9t//+SAP+SVf+Sqv+S//+2AP+2Vf+2qv+2///bAP/bVf/bqv/b////AP//Vf//qv///yH5BAEAAAAALAAAAAAQABAAQAiXAAEIFChHhQEFKuQMFGhAzj85Bg5KPLjtoQEACib92/hPhQptHCVdBFCwIseT2xQoFKhCgaSTGyUhZOkQpQKKGwu6UQHTQAEFJju6GQgxoRxJBRsuJGgg4aQ5SVcSBAqTY0qFO2HepLpRhRsDcyxGvFkAJ0QXNbft0iUTIciHKgAYeMnRY9BJIwG4cFlVZtylJA02lSowIAA7"},"0312":function(e,t,o){"use strict";o("75ce")},"0d53":function(e,t,o){"use strict";o("17d4")},"17d4":function(e,t,o){},"22f2":function(e,t,o){},"75ce":function(e,t,o){},aa36:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAK3RFWHRDcmVhdGlvbiBUaW1lAERpIDMwIFNlcCAyMDAzIDIzOjU0OjI2ICswMTAwZdX/wQAAAAd0SU1FB9QHBwgcNzpVudoAAAAJcEhZcwAACxEAAAsRAX9kX5EAAAAEZ0FNQQAAsY8L/GEFAAAC6klEQVR42k1TX0hTcRT+fttubtN5bWqrphmSkuKfqMQItV7MKCoQwQwfSqLeeirotR566EWo3nqMIgQLU4uQ/liZRVYaaGWi1qZmuundH7d77+79de7dlA0+2M75fd/O+c45QNrnA9AwANy/C9TRTweBredeA+f7GF7cBlpyAJFC1nQufgG3/M0HdfV6Kx9gbJhC+wiZRu4jcHSiNE/hZ0q5r0rk3VY2RuFiQoZlQ6Eg96T32B5m2wRUNJYf6ABaKbrtGVDLvGJX2aECATEZSqaATxr/Q7kGQs6GwLQ/0KPO/gVkGVtrd6Ld7TzXAhx35Wc/qTlV5oIUQVhW8f5zcL4TWCKKbmCjj3og5Na1DndxPkMsjoIi0en1hZrq2qqzsLoKXZUx8jWoX11RehaAWaIMEuY2KrgIfJ0enhpGQgXUBASHgPrTFQySBGgqJn1hPPBFn47THyVtMUWUdCf1Gs5lD0NzzhY7EJeBtTiJKVgKRtHzdnHiBjDFzWHBMDlgcGzr7CHAS42dtYs0PZWqUBSTbH6PqZA4IvRvcxowiqQHGlKzZO+oA2uh+9Hh9v1l2cbg1mIwW1GSApl2hkqP4C30x8QAx5AfmKdXqinwHGguqi26V9lYbLeEpGTpiQQ0RYaFetcTGmlpyKBay7cLnrxl9YhL5QtUxozhgYXUoobDWA4SOW6OMRSJondgLjH9O0yrqIHrJEKiNsbRtNfu2QVcIHI1wWnJtbKbO4qyqM+YSV6Uouh/tRi8FFYfdo5KvTN+ius6OFWiaBpGphX0AT9Sm+i0LWl8UAtHqmQHwyQ9fjkmfb+m85EVwHcHGM/7Fo607na0gTZ0ak5Bd0DrpRGsEXmRIDPatpITgqVLt7G8xzFtuB8Ik70/k4PBFEG8DFyh5RHp0KR/lKfYF8IbwrxxbRmEkuQygg7NNMc4Fh8hShCMSyFUEuyp+GxqlCpLnayR2Jx6HEFy29S0JTP2xZV6S6aA3AY3Ev8B7SZDadzBZ9sAAAAASUVORK5CYII="},be35:function(e,t,o){},cd49:function(e,t,o){"use strict";o.r(t);var a=o("7a23"),n=o("c3a1");o("7437");const l={id:"nav"};function r(e,t){const o=Object(a["resolveComponent"])("router-link"),n=Object(a["resolveComponent"])("router-view");return Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],null,[Object(a["createElementVNode"])("div",l,[Object(a["createVNode"])(o,{to:"/"},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])("Editor")]),_:1}),Object(a["createTextVNode"])(" | "),Object(a["createVNode"])(o,{to:"/about"},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])("Preview")]),_:1})]),Object(a["createVNode"])(n)],64)}o("0d53");var i=o("6b0d"),s=o.n(i);const c={},d=s()(c,[["render",r]]);var u=d,h=o("6605");const m={class:"home"};function p(e,t,o,n,l,r){const i=Object(a["resolveComponent"])("dragFlow");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",m,[Object(a["createVNode"])(i)])}var g=o("9ab4"),b=o("ce1f");const A={class:"hello"},f={class:"top-tools"},v={class:"generalToolBox"},V={class:"generalTooltitle"},x={ref:"dfcontainer",class:"graph_container",onmousewheel:"return false;"};function S(e,t,o,n,l,r){const i=Object(a["resolveComponent"])("el-col"),s=Object(a["resolveComponent"])("el-button"),c=Object(a["resolveComponent"])("el-tooltip"),d=Object(a["resolveComponent"])("el-input"),u=Object(a["resolveComponent"])("el-row"),h=Object(a["resolveComponent"])("upload-data");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",A,[Object(a["createElementVNode"])("div",f,[Object(a["createVNode"])(u,null,{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(i,{span:6}),Object(a["createVNode"])(i,{span:12,class:"tools-group"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(c,{class:"item",effect:"dark",content:"导入xml文件",placement:"bottom"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(s,{link:"",class:"iconfont icon-daoru",onClick:r.inPutXml},null,8,["onClick"])]),_:1}),Object(a["createVNode"])(c,{class:"item",effect:"dark",content:"导出xml文件",placement:"bottom"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(s,{link:"",class:"iconfont icon-daochu",onClick:r.outPutXml},null,8,["onClick"])]),_:1}),Object(a["createVNode"])(c,{class:"item",effect:"dark",content:"导出为图片",placement:"bottom"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(s,{link:"",class:"iconfont icon-daochutupian",onClick:r.outPutImage},null,8,["onClick"])]),_:1}),Object(a["createVNode"])(c,{class:"item",effect:"dark",content:"导入JSON文件",placement:"bottom"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(s,{link:"",class:"iconfont icon-daoru",onClick:r.inPutJSON},null,8,["onClick"])]),_:1}),Object(a["createVNode"])(c,{class:"item",effect:"dark",content:"导出JSON",placement:"bottom"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(s,{link:"",class:"iconfont icon-json",onClick:r.outPutJSON},null,8,["onClick"])]),_:1})]),_:1}),Object(a["createVNode"])(i,{span:6},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(d,{modelValue:l.searchValue,"onUpdate:modelValue":t[0]||(t[0]=e=>l.searchValue=e),placeholder:"节点名称修改",style:{width:"120px"}},null,8,["modelValue"]),Object(a["createVNode"])(s,{slot:"append",onClick:t[1]||(t[1]=e=>{r.updateNodeName(l.searchValue)})},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])("更新")]),_:1})]),_:1})]),_:1})]),Object(a["createElementVNode"])("div",v,[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(o.generalToolbarItems,e=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("span",{style:Object(a["normalizeStyle"])(e["style"]),class:Object(a["normalizeClass"])(e["class"]),key:e["index"],ref_for:!0,ref:"generalToolItems"},[Object(a["createElementVNode"])("span",V,Object(a["toDisplayString"])(e["text"]),1)],6))),128))]),Object(a["createElementVNode"])("div",x,null,512),l.uploadDataVisible?(Object(a["openBlock"])(),Object(a["createBlock"])(h,{key:0,onUploadPaintFlow:r.uploadPaintFlow,graphXml:l.graphXml},null,8,["onUploadPaintFlow","graphXml"])):Object(a["createCommentVNode"])("",!0),l.uploadJSONDataVisible?(Object(a["openBlock"])(),Object(a["createBlock"])(h,{key:1,onUploadPaintFlow:r.uploadJSONPaintFlow,graphXml:l.graphJSON,json:""},null,8,["onUploadPaintFlow","graphXml"])):Object(a["createCommentVNode"])("",!0)])}o("14d9"),o("5494"),o("b7ef");var O=o("98fc"),w=o.n(O),j=o("2a07"),C=o("0136"),k=o.n(C),y=o("aa36"),N=o.n(y),E=(o("2ef0"),o("b17e"));const q=Object(a["createElementVNode"])("i",{class:"el-icon-upload"},null,-1),J={class:"el-upload__text"},D=Object(a["createElementVNode"])("em",null,"点击上传",-1),T={slot:"tip",class:"el-upload__tip"},U=Object(a["createElementVNode"])("em",null,"1",-1),L={style:{display:"flex"}},G={style:{width:"100%","word-break":"break-all","white-space":"pre-line","max-height":"300px","overflow-y":"auto"}},B={slot:"footer",class:"dialog-footer"};function P(e,t,o,n,l,r){const i=Object(a["resolveComponent"])("el-upload"),s=Object(a["resolveComponent"])("el-button"),c=Object(a["resolveComponent"])("el-dialog");return Object(a["openBlock"])(),Object(a["createBlock"])(c,{title:"数据导入",modelValue:l.centerDialogVisible,"onUpdate:modelValue":t[0]||(t[0]=e=>l.centerDialogVisible=e),modelModifiers:{sync:!0},width:"70%",center:"",onClose:r.close},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(i,{class:"upload-box",drag:"",accept:o.json?".json":".xml",action:"","file-list":l.uploadFiles,"on-change":r.fileChange,"auto-upload":!1,limit:1,"on-exceed":r.exceedFile},{default:Object(a["withCtx"])(()=>[q,Object(a["createElementVNode"])("div",J,[Object(a["createTextVNode"])(" 将文件拖到此处，或 "),D,Object(a["createElementVNode"])("div",T,[Object(a["createTextVNode"])(" 只能上传 "),Object(a["createElementVNode"])("em",null,Object(a["toDisplayString"])(o.json?"json":"xml"),1),Object(a["createTextVNode"])(" 文件，且最大文件数量不超过 "),U,Object(a["createTextVNode"])(" 个 ")])])]),_:1},8,["accept","file-list","on-change","on-exceed"]),Object(a["createElementVNode"])("div",L,[Object(a["createElementVNode"])("pre",G," "+Object(a["toDisplayString"])(l.currentNodeData)+" ",1)]),Object(a["createElementVNode"])("span",B,[Object(a["createVNode"])(s,{onClick:r.cancelUpload},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])("取 消")]),_:1},8,["onClick"]),Object(a["createVNode"])(s,{type:"primary",onClick:r.confirmUpload},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])("导入")]),_:1},8,["onClick"])])]),_:1},8,["modelValue","onClose"])}var I={props:{graphXml:{type:String,default:""},json:{type:Boolean,default:!1}},data(){return{uploadFiles:[],centerDialogVisible:!1,currentNodeData:""}},components:{},watch:{currentNodeData:{handler(e){},immediate:!0,deep:!0}},mounted(){console.log(this.json),console.log(666),this.centerDialogVisible=!0,this.currentNodeData=this.graphXml},methods:{close(){this.centerDialogVisible=!1,this.json?this.$parent.uploadJSONDataVisible=!1:this.$parent.uploadDataVisible=!1},confirmUpload(){this.currentNodeData?(this.$emit("uploadPaintFlow",this.currentNodeData),this.centerDialogVisible=!1,this.json?this.$parent.uploadJSONDataVisible=!1:this.$parent.uploadDataVisible=!1):this.$message.warning("请上传文件")},cancelUpload(){console.log(this.currentNodeData),this.centerDialogVisible=!1,this.$parent.uploadDataVisible=!1,this.currentNodeData=""},tirggerFile(){},fileChange(e){if(this.json){var t=e.name.split(".").pop();if("json"!==t)return this.$message.error("上传文件类型错误,请重新上传JSON类型的文件"),void(this.uploadFiles=[])}else{t=e.name.split(".").pop();if("xml"!==t)return this.$message.error("上传文件类型错误,请重新上传XML类型的文件"),void(this.uploadFiles=[])}if(e){let t=new FileReader;t.readAsText(e.raw),t.onload=()=>{this.$message.success("文件上传成功");var e=t.result;this.currentNodeData=e}}},exceedFile(){this.$message.error("超出文件可上传数量,请先清除文件")}}};const Q=s()(I,[["render",P]]);var F=Q;const R=new w.a;window.mxGraph=j["mxGraph"],window.mxGraphModel=j["mxGraphModel"],window.mxEditor=j["mxEditor"],window.mxGeometry=j["mxGeometry"],window.mxDefaultKeyHandler=j["mxDefaultKeyHandler"],window.mxDefaultPopupMenu=j["mxDefaultPopupMenu"],window.mxStylesheet=j["mxStylesheet"],window.mxDefaultToolbar=j["mxDefaultToolbar"];const M=[{index:0,text:"开始",id:"start",title:"rectangle",class:"common rectangle start",width:120,height:40,value:"开始",style:{margin_left:10,shape:"rectangle",perimeter:"ellipsePerimeter",arcSize:20,fillColor:"rgba(52, 73, 93, 1)",fontColor:"rgba(255, 255, 255, 1)",fontSize:14},ewaicanshu77777:123},{index:1,text:"节点",id:"node",title:"rectangle",class:"common rectangle comnode",width:120,height:40,value:"node",style:{margin_left:10,shape:"rectangle",perimeter:"ellipsePerimeter",arcSize:20,fillColor:"rgba(58, 184, 130, 1)",fontColor:"rgba(255, 255, 255, 1)",strokeColor:"rgba(255, 255, 255, 1)",fontSize:14},ewaicanshu77777:123},{index:2,text:"节点",title:"rhombus",id:"judgment",class:"common rhombus judgment",width:80,height:80,value:"judgment",style:{shape:"rhombus",margin_left:10,perimeter:"ellipsePerimeter",fillColor:"rgba(252, 183, 56, 1)",fontColor:"rgba(255, 255, 255, 1)",fontSize:14}},{index:3,text:"结束",title:"circle",id:"end",class:"common circle end",width:80,height:80,value:"结束",style:{shape:"ellipse",margin_left:10,shape:"ellipse",perimeter:"ellipsePerimeter",fillColor:"rgba(218, 89, 97, 1)",fontColor:"rgba(255, 255, 255, 1)",fontSize:14}}];var _={name:"dragFlow",components:{uploadData:F},computed:{},mounted(){this.init()},props:{generalToolbarItems:{type:Array,default:()=>M}},data(){return{editor:null,graph:null,aaa:{},searchValue:"",uploadDataVisible:!1,graphXml:"",uploadJSONDataVisible:!1,graphJSON:""}},methods:{init(){this.createGraph(),this.eventCenter(),this.$nextTick(()=>{this.initGeneralTool()})},createGraph(){this.editor=new j["mxEditor"];let e=this.editor.graph;this.graph=e,this.editor.setGraphContainer(this.$refs.dfcontainer),this.graph.setCellsResizable(!1),this.graph.setConnectable(!0),this.graph.setMultigraph(!1),this.graph.setAllowDanglingEdges(!1),this.graph.setAllowLoops(!1);let t=this.graph.getStylesheet().getDefaultEdgeStyle();t[j["mxConstants"].STYLE_EDGE]=j["mxEdgeStyle"].TopToBottom,t[j["mxConstants"].STYLE_STROKEWIDTH]=2,t[j["mxConstants"].STYLE_ROUNDED]=1,this.iconSet()},iconSet(){function e(e){this.images=[];var t=e.view.graph,o=j["mxUtils"].createImage(N.a);o.setAttribute("title","Delete"),o.style.position="absolute",o.style.cursor="pointer",o.style.width="16px",o.style.height="16px",o.style.left=e.x+e.width+"px",o.style.top=e.y-16+"px",j["mxEvent"].addGestureListeners(o,j["mxUtils"].bind(this,(function(e){j["mxEvent"].consume(e)}))),j["mxEvent"].addListener(o,"click",j["mxUtils"].bind(this,(function(o){t.removeCells([e.cell]),j["mxEvent"].consume(o),this.destroy()}))),e.view.graph.container.appendChild(o),this.images.push(o)}e.prototype.destroy=function(){if(null!=this.images)for(var e=0;e<this.images.length;e++){var t=this.images[e];t.parentNode.removeChild(t)}this.images=null},j["mxConnectionHandler"].prototype.connectImage=new j["mxImage"](k.a,16,16);var t=20;let o=this.graph;this.graph.addMouseListener({currentState:null,currentIconSet:null,mouseDown:function(e,t){null!=this.currentState&&(this.dragLeave(t.getEvent(),this.currentState),this.currentState=null)},mouseMove:function(e,a){if(null!=this.currentState&&(a.getState()==this.currentState||null==a.getState())){var n=t,l=new j["mxRectangle"](a.getGraphX()-n,a.getGraphY()-n,2*n,2*n);if(j["mxUtils"].intersects(l,this.currentState))return}l=o.view.getState(a.getCell());(o.isMouseDown||null!=l&&!o.getModel().isVertex(l.cell))&&(l=null),l!=this.currentState&&(null!=this.currentState&&this.dragLeave(a.getEvent(),this.currentState),this.currentState=l,null!=this.currentState&&this.dragEnter(a.getEvent(),this.currentState))},mouseUp:function(e,t){},dragEnter:function(t,o){null==this.currentIconSet&&(this.currentIconSet=new e(o))},dragLeave:function(e,t){null!=this.currentIconSet&&(this.currentIconSet.destroy(),this.currentIconSet=null)}}),new j["mxRubberband"](o)},eventCenter(){this.cellsEvent(),this.mouseEvent(),this.keyEvent()},deleteNode(){var e=this.graph.getSelectionCells();this.graph.removeCells([...e])},keyEvent(){let e=new j["mxKeyHandler"](this.graph);e.bindKey(46,e=>{this.deleteNode()})},cellsEvent(){this.graph.addListener(j["mxEvent"].ADD_CELLS,(e,t)=>{this.$nextTick(()=>{let e=t.properties.cells[0],o=e.edge;o?this.$emit("addConnection",e.id):this.$emit("addNode",e.id)})}),this.graph.addListener(j["mxEvent"].CELLS_REMOVED,(e,t)=>{this.$nextTick(()=>{let e=t.properties.cells,o={node:[],connection:[]};e.forEach(e=>{e.edge?o.connection.push(e.id):o.node.push(e.id)}),this.$emit("removeNode",o)})})},mouseEvent(){this.graph.addMouseListener({mouseDown:(e,t)=>{this.upCell={},t.state&&(t.state.cell&&t.state.cell.edge||(this.upCell=t.state.cell))},mouseMove:(e,t)=>{},mouseUp:(e,t)=>{if(void 0===t.sourceState)return setTimeout(()=>{let e=t.evt.isConsumed;e||this.$emit("canvasClick")},0),!1;var o=t.sourceState.cell;o&&(o.edge&&!0===o.edge||!o.vertex||!0!==o.vertex&&1!==o.vertex||o.id==this.upCell.id&&this.$emit("nodeClick",o.id))}}),j["mxEvent"].addMouseWheelListener((e,t)=>{e.target.parentNode==this.$refs.dfcontainer&&(t?this.graph.zoomIn():this.graph.zoomOut())})},initGeneralTool(){var e=this.$refs.generalToolItems;(e instanceof Array||e.length<=0)&&e.forEach((e,t)=>{var o=this.generalToolbarItems[t],{width:a,height:n}=o,l=o.class,r=(e,t,a,n,l)=>{const r=!E["a"](a),i=r?n-a.geometry.x:n,s=r?l-a.geometry.y:l,{width:c,height:d}=o,u=o.style,h=Object.keys(u).map(e=>`${e}=${u[e]}`).join(";"),m=r?a:this.graph.getDefaultParent();this.graph.getModel().beginUpdate();try{let e=this.graph.insertVertex(m,null,o.value,i-c/2,s-d/2,c,d,h+";whiteSpace=wrap;word-break=break-all");e.title="<div style='word-break:break-all'>"+o["title"]+"</div>",e.dropAble=o["dropAble"],e.id=o["id"]+"-"+this.getUUID(32,16),e["isGroup"]=!!o["id"].includes("group")}finally{this.graph.getModel().endUpdate()}},i=()=>{var e=document.createElement("div");return e.style.width=a+"px",e.style.height=n+"px",e.style.transform="translate(-50%,-50%)",e.className=l,e};let s=j["mxUtils"].makeDraggable(e,this.graph,r,i(),0,0,!0,!0);s.setGuidesEnabled(!0)})},getUUID(e,t){let o,a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),n=[];if(t=t||a.length,e)for(o=0;o<e;o++)n[o]=a[0|Math.random()*t];else{let e;for(n[8]=n[13]=n[18]=n[23]="-",n[14]="4",o=0;o<36;o++)n[o]||(e=0|16*Math.random(),n[o]=a[19==o?3&e|8:e])}return n.join("")},inPutXml(){this.uploadDataVisible=!0,this.graphXml=""},outPutXml(){var e=new j["mxCodec"],t=e.encode(this.graph.getModel());let o=j["mxUtils"].getPrettyXml(t),a=new Blob([o],{type:"text/plain"}),n=window.URL.createObjectURL(a);var l=document.createElement("a");l.setAttribute("href",n),l.setAttribute("download","data.xml"),l.click(),l.remove(),this.$message.success("正在下载中,请稍后...")},uploadPaintFlow(e){this.graph.selectAll(),this.graph.removeCells(this.graph.getSelectionCells()),setTimeout(()=>{this.decode(e,this.graph),this.$message.success("渲染成功")},1e3)},decode(e,t){try{var o=this.createXmlDom(e),a=o.documentElement,n=new j["mxCodec"](a.ownerDocument);n.decode(a,t.getModel())}finally{t.getModel().endUpdate(),this.autoSize()}},createXmlDom(e){return(new DOMParser).parseFromString(e,"text/xml")},autoSize(){this.graph.zoomActual(),this.graph.fit(),this.graph.center(),this.graph.zoomTo(.9)},toSvgXml(){var e=j["mxUtils"].createXmlDocument(),t=e.createElement("svg");t.setAttribute("xmlns",j["mxConstants"].NS_SVG),e.appendChild(t);var o=new j["mxSvgCanvas2D"](t),a=new j["mxImageExport"];a.drawState(this.graph.getView().getState(this.graph.model.root),o);var n=j["mxUtils"].getXml(t);return n},outPutImage(e,t="workflow",o="png"){const a=this.toSvgXml();var n=document.createElement("img"),l=this.graph.getGraphBounds();n.setAttribute("width",l.width+Math.abs(l.x)),n.setAttribute("height",l.height+Math.abs(l.y));let r="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(a)));n.setAttribute("src",r),document.documentElement.appendChild(n),n.onload=function(){var e=document.createElement("canvas"),a=e.getContext("2d");e.width=n.width,e.height=n.height,a.drawImage(n,0,0);var l=e.toDataURL("image/"+o),r=document.createElement("img");r.setAttribute("src",l),r.onload=function(){var e=document.createElement("a");e.download=t+"."+o,e.href=r.getAttribute("src"),e.click()}}},outPutToSvg(e="model"){let t=this.toSvgXml();const o=new Blob([t],{type:"image/svg+xml"}),a=URL.createObjectURL(o);let n=document.createElement("a");n.href=a,n.download=e+".svg",n.click()},outPutJSON(e,t="df"){let o=this.xml2JSON(),a=JSON.stringify(o);const n=new Blob([a],{type:"application/json"}),l=URL.createObjectURL(n);let r=document.createElement("a");r.href=l,r.download=t+".json",r.click()},xml2JSON(){var e=new j["mxCodec"],t=e.encode(this.graph.getModel());const o=j["mxUtils"].getXml(t),a=R.xml2js(o);return a},inPutJSON(){this.uploadJSONDataVisible=!0,this.graphJSON=""},uploadJSONPaintFlow(e){const t=R.js2xml(JSON.parse(e));this.graph.selectAll(),this.graph.removeCells(this.graph.getSelectionCells()),setTimeout(()=>{this.decode(t,this.graph),this.$message.success("渲染成功")},1e3)},getFlowNodes(){let e=this.xml2JSON(),t=e.mxGraphModel&&e.mxGraphModel.root&&e.mxGraphModel.root.mxCell||[],o={total:[],node:[],connection:[]};return t.forEach(e=>{e._id&&e.mxGeometry&&(o.total.push(e),e._edge?connection.push(e):connection.node.push(e))}),o},recoverFlow(e=[],t=null){let o={mxGraphModel:{root:{mxCell:[{_id:"0"},{_id:"1",_parent:"0"},...e]}}};const a=R.js2xml(o);this.graph.selectAll(),this.graph.removeCells(this.graph.getSelectionCells()),this.decode(a,this.graph),t&&"function"==typeof t&&t()},updateNodeName(e,t=""){let o;if(t){let e=Object.values(this.graph.getModel().cells);o=e.find(e=>e.id===t)}else{var a=this.graph.getSelectionCells();o=a[0]}o&&this.graph.cellLabelChanged(o,e)}}};o("de7f"),o("0312");const K=s()(_,[["render",S],["__scopeId","data-v-05ee98e3"]]);var X=K;let H=class extends b["b"]{};H=Object(g["a"])([Object(b["a"])({components:{dragFlow:X}})],H);var Z=H;const Y=s()(Z,[["render",p]]);var z=Y;const W=[{path:"/",name:"Home",component:z},{path:"/about",name:"About",component:()=>o.e("about").then(o.bind(null,"f820"))}],$=Object(h["a"])({history:Object(h["b"])(),routes:W});var ee=$,te=o("5502"),oe=Object(te["a"])({state:{},mutations:{},actions:{},modules:{}});o("be35");const ae=Object(a["createApp"])(u);ae.use(oe).use(ee).use(n["a"]).mount("#app")},de7f:function(e,t,o){"use strict";o("22f2")}});
//# sourceMappingURL=app.b7d674c6.js.map